{% extends '!layout.html' %}
{# https://github.com/sphinx-doc/sphinx/blob/master/sphinx/themes/basic/layout.html #}

{% set pageurl = canonical_url() %}

{%- block htmltitle %}

    <link rel="stylesheet" id="silktide-consent-manager-css" href="{{ pathto('_static/silktide-consent-manager.css', 1) }}">
    <script src="{{ pathto('_static/silktide-consent-manager.js', 1) }}"></script>
    <script>
    silktideCookieBannerManager.updateCookieBannerConfig({
      background: {
        showBackground: true
      },
      cookieIcon: {
        position: "bottomRight"
      },
      cookieTypes: [
        {
          id: "analytics",
          name: "Analytics",
          description: "<p>These cookies are necessary for the website to function properly and cannot be switched off. They help with things like logging in and setting your privacy preferences.</p>",
          defaultValue: true,
          required: false,
          onAccept: function() {
            gtag('consent', 'update', {
              analytics_storage: 'granted',
            });
            dataLayer.push({
              'event': 'consent_accepted_analytics',
            });
          },
          onReject: function() {
            gtag('consent', 'update', {
              analytics_storage: 'denied',
            });
          }
        },
        {
          id: "advertising",
          name: "Advertising",
          description: "<p>These cookies help us improve the site by tracking which pages are most popular and how visitors move around the site.</p>",
          defaultValue: true,
          required: false,
          onAccept: function() {
            gtag('consent', 'update', {
              ad_storage: 'granted',
              ad_user_data: 'granted',
              ad_personalization: 'granted',
            });
            dataLayer.push({
              'event': 'consent_accepted_advertising',
            });
          },
          onReject: function() {
            gtag('consent', 'update', {
              ad_storage: 'denied',
              ad_user_data: 'denied',
              ad_personalization: 'denied',
            });
          }
        }
      ],
      text: {
        banner: {
          description: "<p>We use cookies on our site to enhance your user experience, provide personalized content, and analyze our traffic. <a href=\"https://chatterbot.us/privacy/\" target=\"_blank\">Cookie Policy.</a></p>",
          acceptAllButtonText: "Accept all",
          acceptAllButtonAccessibleLabel: "Accept all cookies",
          rejectNonEssentialButtonText: "Reject non-essential",
          rejectNonEssentialButtonAccessibleLabel: "Reject non-essential",
          preferencesButtonText: "Preferences",
          preferencesButtonAccessibleLabel: "Toggle preferences"
        },
        preferences: {
          title: "Customize your cookie preferences",
          description: "<p>We respect your right to privacy. You can choose not to allow some types of cookies. Your cookie preferences will apply across our website.</p>",
          creditLinkText: "Get this banner for free",
          creditLinkAccessibleLabel: "Get this banner for free"
        }
      }
    });
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-W1BZP0W419"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}

      // Set consent defaults
      // https://silktide.com/consent-manager/docs/google-consent-mode/
      gtag('consent', 'default', {
        analytics_storage: localStorage.getItem('silktideCookieChoice_analytics') === 'true' ? 'granted' : 'denied',
        ad_storage: localStorage.getItem('silktideCookieChoice_advertising') === 'true' ? 'granted' : 'denied',
        ad_user_data: localStorage.getItem('silktideCookieChoice_advertising') === 'true' ? 'granted' : 'denied',
        ad_personalization: localStorage.getItem('silktideCookieChoice_advertising') === 'true' ? 'granted' : 'denied',
      });

      gtag('js', new Date());
      gtag('config', 'G-W1BZP0W419');
    </script>

    <meta name="google-adsense-account" content="ca-pub-3019790405701706">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3019790405701706"
    crossorigin="anonymous"></script>

{{ super() }}
{%- endblock %}

{%- block extrahead %}
    {{ super() }}

    {# SEO Meta Tags #}
    <meta name="description" content="{{ meta.get('description', 'mathparse: Secure Python library for parsing and evaluating mathematical expressions. Supports 13+ languages, natural language input, and safe eval() alternative with zero dependencies.') if meta else 'mathparse: Secure Python library for parsing and evaluating mathematical expressions. Supports 13+ languages, natural language input, and safe eval() alternative with zero dependencies.' }}">
    <meta name="keywords" content="python, math parser, eval alternative, mathematical expressions, natural language processing, multilingual, calculator, secure evaluation, postfix notation, RPN, safe eval">
    <meta name="author" content="Gunther Cox">

    {# Open Graph Meta Tags for Social Sharing #}
    <meta property="og:title" content="{{ title|striptags|e }}{% if title %} - {% endif %}mathparse">
    <meta property="og:description" content="{{ meta.get('description', 'Secure Python library for parsing mathematical expressions. Safe alternative to eval() with multilingual support.') if meta else 'Secure Python library for parsing mathematical expressions. Safe alternative to eval() with multilingual support.' }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ pageurl|e }}">
    <meta property="og:site_name" content="mathparse Documentation">
    <meta property="og:image" content="https://mathparse.chatterbot.us/_static/mathparse.png">

    {# Additional SEO Tags #}
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">

    {# Structured Data for Search Engines #}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "mathparse",
      "description": "Secure Python library for parsing and evaluating mathematical expressions with multilingual support",
      "url": "https://mathparse.chatterbot.us",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Cross-platform",
      "programmingLanguage": "Python",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Person",
        "name": "Gunther Cox"
      },
      "codeRepository": "https://github.com/gunthercox/mathparse",
      "softwareVersion": "{{ version|e }}",
      "license": "https://opensource.org/licenses/MIT"
    }
    </script>
{%- endblock %}

{%- block relbaritems %}
    <li class="right"><a href="{{github_page_link()}}">Edit on GitHub</a> |</li>
{% endblock %}

{% block menu %}
    {{ super() }}
{% endblock %}

{%- block footer %}
    {{ super() }}
    <!-- Extra JS -->
{% endblock %}